<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUZER-合作平台 - 首页</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>FUZER-合作平台</h1>
        <nav>
            <ul>
                <li><a href="main.html">首页</a></li>
                <li><a href="projects.html">项目</a></li>
                <li><a href="friends.html">好友</a></li>
                <li><a href="mine.html">我的</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>已有项目</h2>
        <div id="project-list">
            <!-- 直接显示已有的两个项目 -->
            <div class="project-item" id="project1">
                <img src="./images/project1.jpg" alt="项目图片" style="max-width: 100px;">
                <h3>高等数学研究</h3>
                <p>对高等数学的深入研究，包括理论与应用。</p>
                <button onclick="joinProject('高等数学研究', './images/project1.jpg', '对高等数学的深入研究，包括理论与应用。', '学生自主研究', this)">加入项目</button>
            </div>
            <div class="project-item" id="project2">
                <img src="./images/project2.jpg" alt="项目图片" style="max-width: 100px;">
                <h3>福大建筑美学</h3>
                <p>探索福州大学建筑的美学价值和设计理念。</p>
                <button onclick="joinProject('福大建筑美学', './images/project2.jpg', '探索福州大学建筑的美学价值和设计理念。', '教师指导学生研究', this)">加入项目</button>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 FUZER-合作平台</p>
    </footer>

    <script>
        function joinProject(name, image, description, type, button) {
            const newProject = {
                name: name,
                image: image,
                description: description,
                type: type,
                isDefault: false // 标记为用户添加的项目
            };

            fetch('http://localhost:5000/api/projects', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(newProject)
            })
            .then(response => {
                if (response.ok) {
                    alert('项目已加入到项目列表');
                    button.textContent = '已加入'; // 更新按钮文本
                    button.disabled = true; // 禁用按钮
                } else {
                    alert('加入项目失败');
                }
            })
            .catch(err => {
                console.error('加入项目出错:', err);
                alert('加入项目出错');
            });
        }
    </script>
</body>
</html>
