<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUZER-合作平台 - 我的</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>FUZER-合作平台</h1>
        <nav>
            <ul>
                <li><a href="main.html">首页</a></li>
                <li><a href="projects.html">项目</a></li>
                <li><a href="friends.html">好友</a></li>
                <li><a href="mine.html">我的</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="profile">
            <h2>我的资料</h2>
            <img id="profile-avatar" alt="头像" style="max-width: 100px; border-radius: 50%;">
            <p id="username">昵称: </p>
            <p id="email">邮箱: </p>
            <p id="major">专业: </p>
            <p id="bio">个人简介: </p>
            <button id="edit-profile-button" onclick="location.href='edit-profile.html'">编辑资料</button>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 FUZER-合作平台</p>
    </footer>

    <script>
        // 获取用户资料并显示在页面上
        fetch('http://localhost:5000/api/profile', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${localStorage.getItem('token')}` // 使用JWT token
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('获取用户资料失败');
            }
            return response.json();
        })
        .then(data => {
            document.getElementById('profile-avatar').src = data.avatar; // 用户头像
            document.getElementById('username').textContent = `昵称: ${data.username}`;
            document.getElementById('email').textContent = `邮箱: ${data.email}`;
            document.getElementById('major').textContent = `专业: ${data.major}`;
            document.getElementById('bio').textContent = `个人简介: ${data.bio}`;
        })
        .catch(err => {
            console.error('获取用户资料失败:', err);
        });
    </script>
</body>
</html>
